/*! build:ucf hash:71750d44a5257e89ea60, chunkhash:229a520094ed88381cb3, name:singletable-popup-edit/index, filebase:index.js, query:, file:singletable-popup-edit/index.js */!function(e){function t(t){for(var n,o,i=t[0],s=t[1],c=t[2],d=0,p=[];d<i.length;d++)o=i[d],r[o]&&p.push(r[o][0]),r[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(u&&u(t);p.length;)p.shift()();return l.push.apply(l,c||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],n=!0,i=1;i<a.length;i++){var s=a[i];0!==r[s]&&(n=!1)}n&&(l.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={8:0},l=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp=window.webpackJsonp||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=s;l.push([2071,0]),a()}({0:function(e,t){e.exports=React},1:function(e,t){e.exports=PropTypes},2051:function(e,t,a){},2052:function(e,t,a){},2053:function(e,t,a){},2054:function(e,t,a){},2071:function(e,t,a){"use strict";a.r(t);a(135);var n=a(0),r=a.n(n),l=a(2),o=a.n(l),i=a(8),s=a.n(i),c=a(10),u=a.n(c),d=a(11),p=a.n(d),m=a(12),f=a.n(m),h=a(13),b=a.n(h),E=a(14),g=a.n(E),v=a(5),y=a.n(v),w=a(3),S=a(50),x=a(49),k=a(20),C=a(51),O=a(81),P=a(46),V=a.n(P),F=a(45),I=a.n(F),Y=a(98),D=a(157),M=a(24),T=a(4),j=a(64),q=a.n(j),N=(a(2051),M.a.Item),L=w.Select.Option,H=I.a.YearPicker,R=function(e){function t(){var e,a;u()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=f()(this,(e=b()(t)).call.apply(e,[this].concat(r)))).search=function(){a.props.form.validateFields(function(e,t){var n=Object(T.m)(t);n.year&&(n.year=n.year.format("YYYY")),a.getQuery(n,0)})},a.reset=function(){a.props.form.resetFields()},a.getQuery=function(e,t){var n=Object(T.f)(a.props.queryParam),r=n.pageParams,o=n.whereParams;for(var i in o=Object(T.f)(o),r.pageIndex=0,e){var s=!0,c=!1,u=void 0;try{for(var d,p=o.entries()[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var m=V()(d.value,2),f=m[0];if(i===m[1].key){o.splice(f,1);break}}}catch(e){c=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(c)throw u}}if((e[i]||0===e[i])&&0===t){var h="LIKE";["code","month"].includes(i)&&(h="EQ"),o.push({key:i,value:e[i],condition:h})}}n.whereParams=o,l.actions.popupEdit.updateState(n),0===t&&l.actions.popupEdit.loadList(n),a.props.onCloseEdit()},a}return g()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.onCallback,n=t.getFieldProps;return r.a.createElement(Y.a,{form:t,reset:this.reset,onCallback:a,search:this.search},r.a.createElement(M.a,{size:"sm"},r.a.createElement(N,{label:"员工编号"},r.a.createElement(w.FormControl,s()({placeholder:"精确查询"},n("code",{initialValue:""})))),r.a.createElement(N,{label:"员工姓名"},r.a.createElement(w.FormControl,s()({placeholder:"模糊查询"},n("name",{initialValue:""})))),r.a.createElement(N,{label:"年份"},r.a.createElement(H,s()({},n("year",{initialValue:null}),{format:"YYYY",locale:q.a,placeholder:"选择年"}))),r.a.createElement(N,{label:"月份"},r.a.createElement(D.a,n("month",{initialValue:""}))),r.a.createElement(N,{label:"是否超标"},r.a.createElement(w.Select,n("exdeeds",{initialValue:""}),r.a.createElement(L,{value:""},"请选择"),r.a.createElement(L,{value:"0"},"未超标"),r.a.createElement(L,{value:"1"},"超标")))))}}]),t}(n.Component),_=M.a.createForm()(R),A=a(6),B=a.n(A),z=a(16),G=a.n(z),Q=a(35),J=a.n(Q),K=a(80),U=a(30),W=a(56),$=a.n(W),X=(a(2052),M.a.Item),Z=w.Select.Option,ee=I.a.YearPicker,te="YYYY",ae=["新增","修改","详情"],ne=function(e){function t(e){var a;return u()(this,t),(a=f()(this,b()(t).call(this,e))).onCloseEdit=function(){a.setState({rowData:{},btnFlag:0}),a.props.onCloseEdit()},a.onSubmitEdit=function(){var e=J()(a),t=e.state.btnFlag;e.props.form.validateFields(function(n,r){var o=Object(T.m)(r);n||(o=e.onHandleSaveData(o),a.onCloseEdit(),o.btnFlag=t,l.actions.popupEdit.saveOrder(o))})},a.onHandleSaveData=function(e){J()(a);var t=a.state.rowData,n={};return t&&(n=Object.assign({},t,e)),n.year=n.year.format(te),n},a.onHandleBtns=function(e){var t=J()(a),n=[{label:"取消",fun:a.onCloseEdit,shape:"border"},{label:"确定",fun:t.onSubmitEdit,colors:"primary"}];return 2==e&&(n=[]),n},a.state={rowData:{},btnFlag:0,cancelFlag:!1},a}return g()(t,e),p()(t,[{key:"componentWillReceiveProps",value:function(){var e=G()(B.a.mark(function e(t){var a,n,r,l,o,i,s,c,u;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=this,n=this.props,r=n.btnFlag,l=n.currentIndex,o=t.btnFlag,i=t.currentIndex,s=t.editModelVisible,r===o&&l===i||(a.props.form.resetFields(),this.setState({btnFlag:o}),0!==o&&s&&(c=this.props.list,u=c[i]||{},this.setState({rowData:u})));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.form,a=e.editModelVisible,n=this.state,l=n.rowData,o=n.btnFlag,i=t.getFieldProps,c=t.getFieldError,u=l.code,d=l.serviceYearsCompany,p=(l.pickTime,l.postLevel,l.levelName,l.year),m=l.sex,f=l.allowanceStandard,h=(l.remark,l.deptName,l.dept,l.exdeeds),b=l.allowanceActual,E=l.allowanceType,g=l.month,v=(l.pickType,l.name),S=l.serviceYears,x=l.applyTime,k=this.onHandleBtns(o);return r.a.createElement(K.a,{show:a,title:ae[o],size:"lg",btns:k,autoFocus:!1,enforceFocus:!1,closeclose:this.onCloseEdit,className:"single-table-pop-model"},r.a.createElement(M.a,null,r.a.createElement(X,{label:"员工编号"},r.a.createElement(w.FormControl,s()({disabled:!0},i("code",{initialValue:u||""})))),r.a.createElement(X,{required:!0,label:"员工姓名"},r.a.createElement(w.FormControl,s()({disabled:2===o},i("name",{validateTrigger:"onBlur",initialValue:v||"",rules:[{type:"string",required:!0,pattern:/\S+/gi,message:"请输入员工姓名"}]}))),r.a.createElement(U.a,{errorMsg:c("name")})),r.a.createElement(X,{required:!0,label:"员工性别"},r.a.createElement(w.Select,s()({disabled:2===o},i("sex",{initialValue:void 0!==m?m:0,rules:[{required:!0,message:"请选择员工性别"}]})),r.a.createElement(Z,{value:0},"女"),r.a.createElement(Z,{value:1},"男")),r.a.createElement(U.a,{errorMsg:c("sex")})),r.a.createElement(X,{className:"time",required:!0,label:"工龄"},r.a.createElement($.a,s()({iconStyle:"one",min:0,step:1,disabled:2===o,max:99},i("serviceYears",{initialValue:"number"==typeof S?S:1,rules:[{pattern:/^[0-9]+$/,required:!0}]})))),r.a.createElement(X,{className:"time",required:!0,label:"司龄"},r.a.createElement($.a,s()({iconStyle:"one",min:0,step:1,disabled:2===o,max:99},i("serviceYearsCompany",{initialValue:"number"==typeof d?d:1,rules:[{pattern:/^[0-9]+$/,required:!0}]})))),r.a.createElement(X,{className:"time",required:!0,label:"年份"},r.a.createElement(ee,s()({disabled:2==o},i("year",{initialValue:p?y()(p):y()(),validateTrigger:"onBlur",rules:[{required:!0,message:"请选择申请时间"}]}),{getCalendarContainer:function(){return document.querySelector(".single-table-pop-model")},format:te,locale:q.a,placeholder:"选择年"}))),r.a.createElement(X,{required:!0,label:"月份"},r.a.createElement(D.a,s()({disabled:2===o},i("month",{initialValue:g||1,rules:[{required:!0,message:"请选择月份"}]}))),r.a.createElement(U.a,{errorMsg:c("month")})),r.a.createElement(X,{required:!0,label:"补贴类别"},r.a.createElement(w.Select,s()({disabled:2===o},i("allowanceType",{initialValue:E?E.toString():"1",rules:[{required:!0,message:"请选择补贴类别"}]})),r.a.createElement(Z,{value:"1"},"电脑补助"),r.a.createElement(Z,{value:"2"},"住宿补助"),r.a.createElement(Z,{value:"3"},"交通补助")),r.a.createElement(U.a,{errorMsg:c("allowanceType")})),r.a.createElement(X,{className:"time",required:!0,label:"补贴标准"},r.a.createElement($.a,s()({iconStyle:"one",precision:2,min:0,max:999999,disabled:2===o},i("allowanceStandard",{initialValue:f?Number(f):100})))),r.a.createElement(X,{className:"time",required:!0,label:"实际补贴"},r.a.createElement($.a,s()({iconStyle:"one",precision:2,min:0,max:999999,disabled:2===o},i("allowanceActual",{initialValue:b?Number(b):100})))),r.a.createElement(X,{required:!0,label:"是否超标"},r.a.createElement(w.Select,s()({disabled:2===o},i("exdeeds",{initialValue:h?h.toString():"0",rules:[{required:!0,message:"请选择是否超标"}]})),r.a.createElement(Z,{value:"0"},"未超标"),r.a.createElement(Z,{value:"1"},"超标")),r.a.createElement(U.a,{errorMsg:c("exdeeds")})),o>=2?r.a.createElement(X,{className:"time",required:!0,label:"申请时间"},r.a.createElement(I.a,s()({className:"form-item",format:"YYYY-MM-DD HH:mm:ss",disabled:2===o},i("applyTime",{initialValue:x?y()(x):y()(),validateTrigger:"onBlur",rules:[{required:!0,message:"请选择申请时间"}]})))):null))}}]),t}(n.Component),re=M.a.createForm()(ne),le=(a(2053),"YYYY-MM-DD HH:mm:ss"),oe=function(e){function t(e){var a;return u()(this,t),(a=f()(this,b()(t).call(this,e))).onRefreshList=function(){l.actions.popupEdit.loadList(a.props.queryParam)},a.freshData=function(e){a.onPageSelect(e,0)},a.onDataNumSelect=function(e,t){a.onPageSelect(t,1)},a.onPageSelect=function(e,t){var n=Object(T.f)(a.props.queryParam),r=Object(T.k)(e,t,n.pageParams),o=r.pageIndex,i=r.pageSize;n.pageParams={pageIndex:o,pageSize:i},a.setState({selectedIndex:0}),l.actions.popupEdit.loadList(n)},a.onClickShowModel=function(e){a.setState({editModelVisible:!0,btnFlag:e})},a.onCloseEdit=function(){a.setState({editModelVisible:!1,btnFlag:-1})},a.onClickDel=function(){a.props.list.length>0?a.setState({delModalVisible:!0,showHoverContent:!1}):Object(T.b)("数据为空，不能删除")},a.column=[{title:"员工编号",dataIndex:"code",key:"code",width:150},{title:"员工姓名",dataIndex:"name",key:"name",width:120,filterType:"text",filterDropdown:"show",render:function(e,t,a){return r.a.createElement(w.Tooltip,{inverse:!0,overlay:e},r.a.createElement("span",{tootip:e,className:"popTip"},e))}},{title:"员工性别",dataIndex:"sexEnumValue",key:"sexEnumValue",width:150},{title:"工龄",dataIndex:"serviceYears",key:"serviceYears",width:130,className:"column-number-right "},{title:"司龄",dataIndex:"serviceYearsCompany",key:"serviceYearsCompany",width:130,className:"column-number-right "},{title:"年份",dataIndex:"year",key:"year",width:100,render:function(e,t,a){return r.a.createElement("div",null,e?y()(e).format("YYYY"):"")}},{title:"月份",dataIndex:"monthEnumValue",key:"monthEnumValue",width:100},{title:"补贴类别",dataIndex:"allowanceTypeEnumValue",key:"allowanceTypeEnumValue",width:120},{title:"补贴标准",dataIndex:"allowanceStandard",key:"allowanceStandard",width:120,className:"column-number-right ",render:function(e,t,a){return r.a.createElement("span",null,"number"==typeof e?e.toFixed(2):"")}},{title:"实际补贴",dataIndex:"allowanceActual",key:"allowanceActual",width:120,className:"column-number-right ",render:function(e,t,a){return r.a.createElement("span",null,"number"==typeof e?e.toFixed(2):"")}},{title:"是否超标",dataIndex:"exdeedsEnumValue",key:"exdeedsEnumValue",width:120},{title:"申请时间",dataIndex:"applyTime",key:"applyTime",width:150,render:function(e,t,a){return r.a.createElement("div",null,e?y()(e).format(le):"")}}],a.export=function(){a.grid.exportExcel()},a.resetTableHeight=function(e){var t=0;t=e?Object(T.j)()-420:Object(T.j)()-270,a.setState({tableHeight:t})},a.state={tableHeight:0,selectedIndex:0,editModelVisible:!1,btnFlag:0,delModalVisible:!1,showHoverContent:!1},a}return g()(t,e),p()(t,[{key:"componentWillMount",value:function(){this.resetTableHeight(!0)}},{key:"componentDidMount",value:function(){this.onRefreshList()}},{key:"confirmGoBack",value:function(e){if(this.setState({delModalVisible:!1}),1===e){var t=this.props.list[this.state.selectedIndex];l.actions.popupEdit.removeList(t)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,n=t.showLoading,l=t.pageIndex,o=t.totalPages,i=t.total,c=this.state,u=c.editModelVisible,d=c.selectedIndex,p=c.btnFlag,m=c.delModalVisible,f=c.tableHeight,h=c.showHoverContent,b={activePage:l,total:i,items:o,freshData:this.freshData,onDataNumSelect:this.onDataNumSelect},E=a.length<=0;return r.a.createElement("div",{className:"single-table-popup"},r.a.createElement(x.a,{title:"A3 单表弹框编辑示例"}),r.a.createElement(_,s()({},this.props,{onCloseEdit:this.onCloseEdit,onCallback:this.resetTableHeight})),r.a.createElement("div",{className:"table-header"},r.a.createElement(O.a,{funcCode:"singletable-popupedit"},r.a.createElement(k.a,{role:"add",colors:"primary",className:"ml8",onClick:function(){e.onClickShowModel(0)}},"新增"),r.a.createElement(k.a,{shape:"border",className:"ml8",onClick:this.export},"导出")),r.a.createElement(C.a,{show:m,context:"是否要删除 ?",confirmFn:function(){e.confirmGoBack(1)},cancelFn:function(){e.confirmGoBack(2)}})),r.a.createElement("div",{className:"gird-parent"},r.a.createElement(S.a,{ref:function(t){return e.grid=t},data:a,rowKey:function(e,t){return t},columns:this.column,paginationObj:b,selectedRow:this.selectedRow,multiSelect:!1,hoverContent:function(){return h?r.a.createElement(O.a,{funcCode:"singletable-popupedit"},r.a.createElement(k.a,{isAction:!0,role:"update",className:"ml8",disabled:E,onClick:function(){e.setState({showHoverContent:!1}),e.onClickShowModel(1)}},"修改"),r.a.createElement(k.a,{isAction:!0,className:"ml8",disabled:E,onClick:function(){e.setState({showHoverContent:!1}),e.onClickShowModel(2)}},"详情"),r.a.createElement(k.a,{isAction:!0,role:"delete",className:"ml8",disabled:E,onClick:e.onClickDel},"删除")):null},onRowHover:function(t){e.setState({selectedIndex:t,showHoverContent:!0})},showHeaderMenu:!0,sort:{mode:"multiple",backSource:!0},loading:{show:n},scroll:{y:f},sheetHeader:{height:30,ifshow:!1}})),r.a.createElement(re,{editModelVisible:u,onCloseEdit:this.onCloseEdit,currentIndex:d,btnFlag:p,list:a}))}}]),t}(n.Component),ie=a(27),se=a.n(ie),ce=a(19),ue={GET_DETAIL:"".concat("/iuap-pap-demo-be","/popup_allowances/list"),SAVE_ORDER:"".concat("/iuap-pap-demo-be","/popup_allowances/insertSelective"),UPDATE_ORDER:"".concat("/iuap-pap-demo-be","/popup_allowances/updateSelective"),DEL_ORDER:"".concat("/iuap-pap-demo-be","/popup_allowances/deleteBatch"),GET_LIST:"".concat("/iuap-pap-demo-be","/popup_allowances/list")},de=function(e){var t=Object.assign({},e),a=Object(T.f)(t.pageParams);return delete t.pageParams,Object(ce.a)(ue.GET_LIST,{method:"post",data:t,param:a})},pe=function(e){return Object(ce.a)(ue.UPDATE_ORDER,{method:"post",data:e})},me={name:"popupEdit",initialState:{showLoading:!1,list:[],pageIndex:0,pageSize:25,totalPages:1,total:0,queryParam:{pageParams:{pageIndex:0,pageSize:25},whereParams:[]}},reducers:{updateState:function(e,t){return se()({},e,Object(T.f)(t))}},effects:{loadList:function(){var e=G()(B.a.mark(function e(t,a){var n,r,o,i,s;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.actions.popupEdit.updateState({showLoading:!0}),n=t||a().popupEdit.queryParam,e.t0=T.p,e.next=5,de(n);case 5:e.t1=e.sent,r=(0,e.t0)(e.t1),o=r.result,i=o.data,s={showLoading:!1,queryParam:n},i&&(s=Object.assign({},s,{list:i.content,pageIndex:i.number+1,totalPages:i.totalPages,total:i.totalElements,pageSize:i.size})),l.actions.popupEdit.updateState(s);case 12:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),removeList:function(){var e=G()(B.a.mark(function e(t,a){var n,r,o,i,s,c,u;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.actions.popupEdit.updateState({showLoading:!0}),n=t.id,e.t0=T.p,e.next=5,d=[{id:n}],Object(ce.a)(ue.DEL_ORDER,{method:"post",data:d});case 5:e.t1=e.sent,r=(0,e.t0)(e.t1,"删除成功"),"success"===r.result.status?(o=a().popupEdit,i=o.queryParam,s=o.list,c=o.totalPages,(u=i.pageParams.pageIndex)>0&&u+1===c&&1===s.length&&(i.pageParams.pageIndex=u-1),l.actions.popupEdit.loadList(i)):l.actions.popupEdit.updateState({showLoading:!1});case 9:case"end":return e.stop()}var d},e)}));return function(t,a){return e.apply(this,arguments)}}(),saveOrder:function(){var e=G()(B.a.mark(function e(t,a){var n,r,o,i,s,c;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.actions.popupEdit.updateState({showLoading:!0}),n=null,r=t.btnFlag,delete t.btnFlag,0!==r){e.next=12;break}return e.t0=T.p,e.next=8,a=t,Object(ce.a)(ue.SAVE_ORDER,{method:"post",data:a});case 8:e.t1=e.sent,o=(0,e.t0)(e.t1,"保存成功"),i=o.result,n=i.status;case 12:if(1!==r){e.next=20;break}return e.t2=T.p,e.next=16,pe(t);case 16:e.t3=e.sent,s=(0,e.t2)(e.t3,"修改成功"),c=s.result,n=c.status;case 20:"success"===n?l.actions.popupEdit.loadList():l.actions.popupEdit.updateState({showLoading:!1});case 21:case"end":return e.stop()}var a},e)}));return function(t,a){return e.apply(this,arguments)}}()}};o.a.model(me);var fe=Object(l.connect)(function(e){return e.popupEdit},null)(oe);a(2054);Object(l.render)(r.a.createElement(fe,null),document.querySelector("#app"))},3:function(e,t){e.exports=TinperBee},7:function(e,t){e.exports=ReactDOM}});